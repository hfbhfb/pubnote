---
title: k8s运维详解
date: 2022-04-30 18:35:12
permalink: /pages/9b7d63/
categories:
  - 后端
  - 华为云原生钻石
tags:
  - 
---



## 无状态工作负载(deployment) 更新 `strategy`
  - Recreate
  - RollingUpdate:滚动升级,默认策略
  - maxSurge: 默认25%
  - maxUnavaliable: 可以有多少个失效 

## 回滚策略示例

<img src="./minilet/image-20220501032659255.png" alt="image-20220501032659255" style="zoom:80%;" />


## 回滚操作
  - 上一版本: kubectl rollout undo deployment/nginx
  - 回滚到指定版本: kubectl rollout undo deployment/nginx --to-revision=2





