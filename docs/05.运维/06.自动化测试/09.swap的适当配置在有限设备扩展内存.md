---
title: swap的适当配置在有限设备扩展内存
date: 2021-12-19 21:32:00
permalink: /pages/df73c0/
categories:
  - 运维
  - 自动化测试
tags:
  - 
---

* 一个场景: 你只有1核1G的云主机,但应用存在内存泄露,这时候可以用swap(linux)扩展一下你应用可使用内存
    * free 查看swap信息
        * swapoff -a   关闭swap

* 其它 swap 命令和操作 : https://askubuntu.com/questions/927854/how-do-i-increase-the-size-of-swapfile-without-removing-it-in-the-terminal

  * First disable swap file:

    ```
    sudo swapoff /swapfile
    ```

    Now let's increase the size of swap file:

    ```
    sudo dd if=/dev/zero of=/swapfile bs=1M count=1024 oflag=append conv=notrunc
    ```

    The above command will append 1GiB of zero bytes at the end of your swap file.

    Setup the file as a "swap file":

    ```
    sudo mkswap /swapfile
    ```

    enable swaping:

    ```
    sudo swapon /swapfile
    ```

  * 
